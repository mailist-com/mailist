<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
    xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
                        http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.20.xsd">

    <!-- Master Changelog for Mailist Application -->
    <!-- All migrations are executed in order -->

    <!-- 001: Create base tables for multi-tenancy -->
    <include file="db/changelog/001-create-organizations.xml"/>

    <!-- 002: Create users and authentication tables -->
    <include file="db/changelog/002-create-users.xml"/>
    <include file="db/changelog/003-create-user-preferences.xml"/>
    <include file="db/changelog/004-create-refresh-tokens.xml"/>

    <!-- 003: Create marketing automation tables -->
    <include file="db/changelog/005-create-contacts.xml"/>
    <include file="db/changelog/006-create-contact-lists.xml"/>
    <include file="db/changelog/007-create-campaigns.xml"/>
    <include file="db/changelog/008-create-automation-rules.xml"/>
    <include file="db/changelog/009-create-reports.xml"/>

    <!-- 004: Create indexes for performance -->
    <include file="db/changelog/010-create-indexes.xml"/>

    <!-- 005: Fix missing columns in automation tables -->
    <include file="db/changelog/011-fix-automation-actions-columns.xml"/>

    <!-- 006: Fix column names to match JPA entities -->
    <include file="db/changelog/012-fix-automation-columns.xml"/>

    <!-- 007: Fix contacts and contact_lists tables -->
    <include file="db/changelog/013-fix-contacts-and-lists.xml"/>

</databaseChangeLog>
